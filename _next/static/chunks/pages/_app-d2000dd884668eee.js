(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6840:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return l(4807)}])},4807:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return App}});var n=l(5893);l(2352);var u=l(9696);function App(e){let{Component:t,pageProps:l}=e;return(0,n.jsx)(u.Rc,{children:(0,n.jsx)(t,{...l})})}},9696:function(e,t,l){"use strict";l.d(t,{Rc:function(){return MeetDataProvider},d4:function(){return useMeetDataState}});var n=l(5893),u=l(7294),r=l(1163);let categorizeToByWeightClass=e=>{let t=e.reduce((e,t)=>{var l;let n=getWeightClassKey(t),u=null!==(l=e[n])&&void 0!==l?l:[];return e[n]=[...u,t],e},{});return Object.entries(t)},getWeightClassKey=e=>{let t=e.class.split("kg")[0].trim()+" kg";return t},fetchMeetDataByPlatform=async(e,t,l)=>{try{let n=await fetch("".concat("https://live.powerliften.sport/info/json.php","?").concat(t,"&p=").concat(e)),u=await n.json();return l?l(u.results):u}catch(e){return console.log("Error fetching data",e),null}},useFetchData=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A",t=(0,r.useRouter)(),[l,n]=(0,u.useState)({meet:null,lifters:null,loading:!0});return(0,u.useEffect)(()=>{let t;let poll=async()=>{let t=await fetchMeetDataByPlatform(e);console.log("Meet data",t);let l=await fetchMeetDataByPlatform(e,"mode=results",categorizeToByWeightClass);n({meet:t,lifters:l,loading:!1})};return poll(),t=setInterval(poll,4e3),()=>clearInterval(t)},[t.query.p]),{meet:l.meet,lifters:l.lifters,loading:l.loading}},a={meet:null,lifters:[],loading:!0},o=(0,u.createContext)({meetDataState:a,setMeetDataState:()=>{},currentLifter:{name:[],weightClass:null,weightAttempt:null,place:null,club:null,group:null},currentRound:{round:null,roundNumber:null},platform:"A"}),MeetDataProvider=e=>{var t,l,i;let{children:c}=e,s=(0,r.useRouter)(),d=s.query.p,f=null==d?void 0:d.toString().toUpperCase(),{meet:p,lifters:v,loading:_}=useFetchData(f),[g,h]=u.useState(a);(0,u.useEffect)(()=>{if(p&&v){var e;h({meet:p,lifters:v,loading:!g.meet||(null===(e=g.lifters)||void 0===e?void 0:e.length)===0})}},[p,v]);let m=(null==g?void 0:g.meet)?null==g?void 0:null===(t=g.meet)||void 0===t?void 0:t.nowandupcoming[0]:null,w=(null==m?void 0:m.name.split(" "))||[],y=(null==m?void 0:m.class)||null,D=(null==m?void 0:m.lift_weight)||null,C=(null==m?void 0:m.place)||null,k=(null==m?void 0:m.association)||null,x=(null==m?void 0:m.grp)||null,M=(null==g?void 0:null===(l=g.meet)||void 0===l?void 0:l.lastlifter.lift_neat_na)||null,b=(null==g?void 0:null===(i=g.meet)||void 0===i?void 0:i.lastlifter.lift_neat.split("#")[1])||null;return(0,n.jsx)(o.Provider,{value:{meetDataState:g,setMeetDataState:h,currentLifter:{name:w,weightClass:y,weightAttempt:D,place:C,club:k,group:x},currentRound:{round:M,roundNumber:b},platform:f},children:c})},useMeetDataState=()=>u.useContext(o)},2352:function(){},1163:function(e,t,l){e.exports=l(9974)}},function(e){var __webpack_exec__=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return __webpack_exec__(6840),__webpack_exec__(9974)}),_N_E=e.O()}]);
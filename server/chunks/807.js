exports.id=807,exports.ids=[807],exports.modules={4807:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>App});var a=l(997);l(108);var r=l(9696);function App({Component:e,pageProps:t}){return a.jsx(r.Rc,{children:a.jsx(e,{...t})})}},9696:(e,t,l)=>{"use strict";l.d(t,{Rc:()=>MeetDataProvider,d4:()=>useMeetDataState});var a=l(997),r=l(6689),n=l.n(r),s=l(1163);let categorizeToByWeightClass=e=>{let t=e.reduce((e,t)=>{let l=getWeightClassKey(t),a=e[l]??[];return e[l]=[...a,t],e},{});return Object.entries(t)},getWeightClassKey=e=>{let t=e.class.split("kg")[0].trim()+" kg";return t},fetchMeetDataByPlatform=async(e,t,l)=>{try{let a=await fetch(`https://live.powerliften.sport/info/json.php?${t}&p=${e}`),r=await a.json();return l?l(r.results):r}catch(e){return console.log("Error fetching data",e),null}},useFetchData=(e="A")=>{let t=(0,s.useRouter)(),[l,a]=(0,r.useState)({meet:null,lifters:null,loading:!0});return(0,r.useEffect)(()=>{let t;let poll=async()=>{let t=await fetchMeetDataByPlatform(e);console.log("Meet data",t);let l=await fetchMeetDataByPlatform(e,"mode=results",categorizeToByWeightClass);a({meet:t,lifters:l,loading:!1})};return poll(),t=setInterval(poll,4e3),()=>clearInterval(t)},[t.query.p]),{meet:l.meet,lifters:l.lifters,loading:l.loading}},u={meet:null,lifters:[],loading:!0},i=(0,r.createContext)({meetDataState:u,setMeetDataState:()=>{},currentLifter:{name:[],weightClass:null,weightAttempt:null,place:null,club:null,group:null},currentRound:{round:null,roundNumber:null},platform:"A"}),MeetDataProvider=({children:e})=>{let t=(0,s.useRouter)(),l=t.query.p,o=l?.toString().toUpperCase(),{meet:c,lifters:p,loading:f}=useFetchData(o),[d,g]=n().useState(u);(0,r.useEffect)(()=>{c&&p&&g({meet:c,lifters:p,loading:!d.meet||d.lifters?.length===0})},[c,p]);let m=d?.meet?d?.meet?.nowandupcoming[0]:null,h=m?.name.split(" ")||[],y=m?.class||null,D=m?.lift_weight||null,v=m?.place||null,w=m?.association||null,M=m?.grp||null,x=d?.meet?.lastlifter.lift_neat_na||null,C=d?.meet?.lastlifter.lift_neat.split("#")[1]||null;return a.jsx(i.Provider,{value:{meetDataState:d,setMeetDataState:g,currentLifter:{name:h,weightClass:y,weightAttempt:D,place:v,club:w,group:M},currentRound:{round:x,roundNumber:C},platform:o},children:e})},useMeetDataState=()=>n().useContext(i)},108:()=>{}};